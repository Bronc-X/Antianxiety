# ✅ 功能验证清单

> 本清单用于逐一验证已完成开发的功能模块

## 📋 验证前准备

### 1. 环境检查
- [ ] Node.js 版本 >= 18.x
- [ ] `.env.local` 文件已配置
- [ ] 运行 `npm run check-env` 检查环境变量
- [ ] 开发服务器已启动 (`npm run dev`)
- [ ] 浏览器访问 http://localhost:3000 正常

---

## 1️⃣ 用户系统验证 (100% ✅)

### 1.1 用户注册
- [ ] 访问 http://localhost:3000/signup
- [ ] 使用邮箱/密码注册新账户
- [ ] 验证邮箱格式校验
- [ ] 验证密码强度要求
- [ ] 注册成功后自动登录

### 1.2 用户登录
- [ ] 访问 http://localhost:3000/login
- [ ] 使用邮箱/密码登录
- [ ] 验证错误密码提示
- [ ] 验证"忘记密码"功能（如果已实现）

### 1.3 用户设置
- [ ] 登录后访问用户设置页面
- [ ] 验证可以修改个人信息
- [ ] 验证中英文双语切换功能
- [ ] 验证头像上传功能（如果已实现）

### 1.4 用户登出
- [ ] 点击登出按钮
- [ ] 验证登出后重定向到登录页
- [ ] 验证需要登录的页面无法访问

**验证结果：** ☐ 通过  ☐ 失败（备注：_____________）

---

## 2️⃣ 第三方登录验证 (100% ✅)

### 2.1 Google 登录
- [ ] 访问 http://localhost:3000/login
- [ ] 点击"使用 Google 登录"按钮
- [ ] 验证跳转到 Google OAuth 页面
- [ ] 完成 Google 授权
- [ ] 验证成功登录并创建账户

### 2.2 X (Twitter) 登录
- [ ] 点击"使用 X 登录"按钮
- [ ] 验证跳转到 X OAuth 页面
- [ ] 完成 X 授权
- [ ] 验证成功登录并创建账户

### 2.3 Reddit 登录
- [ ] 点击"使用 Reddit 登录"按钮
- [ ] 验证跳转到 Reddit OAuth 页面
- [ ] 完成 Reddit 授权
- [ ] 验证成功登录并创建账户

### 2.4 微信登录
- [ ] 点击"使用微信登录"按钮
- [ ] 验证跳转到微信 OAuth 页面（或二维码）
- [ ] 完成微信授权
- [ ] 验证成功登录并创建账户

**验证结果：** ☐ 通过  ☐ 失败（备注：_____________）

---

## 3️⃣ AI助手验证 (80% 🚧)

### 3.1 UI 界面
- [ ] 访问 http://localhost:3000/assistant
- [ ] 验证聊天界面正常显示
- [ ] 验证输入框可用
- [ ] 验证发送按钮可用
- [ ] 验证消息历史显示区域

### 3.2 基础对话功能
- [ ] 发送消息："你好"
- [ ] 验证收到 AI 回复
- [ ] 验证回复内容符合"冷峻理性"风格
- [ ] 验证回复不包含情感性语言（如"加油"、"坚持"等）

### 3.3 AI 记忆系统
- [ ] 发送第一条消息："我最近睡眠不好"
- [ ] 等待 AI 回复
- [ ] 发送第二条消息："我昨天说的睡眠问题"
- [ ] 验证 AI 能够引用之前的对话内容
- [ ] 验证 AI 不会说"你之前说过"这类话，而是直接使用信息

### 3.4 个性化建议
- [ ] 发送消息："我想了解如何缓解焦虑"
- [ ] 验证 AI 回复基于第一性原理
- [ ] 验证 AI 提供具体可执行的建议
- [ ] 验证 AI 引用数据（如果有用户数据）

### 3.5 错误处理
- [ ] 断开网络连接
- [ ] 发送消息
- [ ] 验证显示错误提示
- [ ] 恢复网络连接
- [ ] 验证可以重新发送消息

**验证结果：** ☐ 通过  ☐ 失败（备注：_____________）

---

## 4️⃣ 个性化信息推送验证 (80% 🚧)

### 4.1 内容爬取系统
- [ ] 检查 Supabase 数据库中的 `content_feed_vectors` 表
- [ ] 验证表中有内容数据
- [ ] 验证内容包含不同来源（Reddit、X、期刊等）
- [ ] 验证内容有向量嵌入（embedding 字段不为空）
- [ ] 登录后访问 `http://localhost:3000/api/feed/status`，确认最近 25 条抓取记录与来源统计

### 4.2 RAG 搜索系统
- [ ] 访问 http://localhost:3000/dashboard
- [ ] 滚动到"个性化信息流"板块
- [ ] 验证信息流正常加载
- [ ] 验证显示的内容与用户相关

### 4.3 相关性过滤
- [ ] 验证信息流只显示相关性 >= 4.5/5 的内容
- [ ] 验证内容质量高，不是噪音信息
- [ ] 验证内容来源标识正确（Reddit、X、期刊等）

### 4.4 前端展示
- [ ] 验证 PersonalizedFeed 组件正常显示
- [ ] 验证可以刷新信息流
- [ ] 验证内容链接可点击
- [ ] 验证空状态提示（如果没有相关内容）
- [ ] 当个性化向量缺失或相关性不足时，确认组件会显示“已切换到最新内容池 / 精选热议”提示并仍提供备选内容

**验证结果：** ☐ 通过  ☐ 失败（备注：_____________）

---

## 5️⃣ 贝叶斯信念循环验证 (80% 🚧)

### 5.1 习惯打卡功能
- [ ] 访问 http://localhost:3000/dashboard
- [ ] 找到"习惯管理"板块
- [ ] 创建新习惯（例如："10分钟冥想"）
- [ ] 验证习惯创建成功
- [ ] 点击"完成"按钮打卡
- [ ] 验证打卡记录保存

### 5.2 数据库函数
- [ ] 在 Supabase SQL Editor 中执行：
  ```sql
  SELECT calculate_belief_curve_score('你的用户ID'::uuid, CURRENT_DATE);
  ```
- [ ] 验证返回 0-1 之间的分数
- [ ] 执行信心增强函数：
  ```sql
  SELECT calculate_confidence_score('你的用户ID'::uuid, CURRENT_DATE);
  ```
- [ ] 验证返回有效分数
- [ ] 执行身体机能函数：
  ```sql
  SELECT calculate_physical_performance_score('你的用户ID'::uuid, CURRENT_DATE);
  ```
- [ ] 验证返回有效分数

### 5.3 数据可视化
- [ ] 在 Dashboard 页面查看图表区域
- [ ] 验证"习惯完成图表"正常显示
- [ ] 验证"信念分数图表"正常显示
- [ ] 验证图表数据随时间更新
- [ ] 验证图表交互功能（悬停显示数值等）

### 5.4 自动计算触发
- [ ] 完成一个习惯打卡
- [ ] 等待几秒钟
- [ ] 检查 `user_metrics` 表
- [ ] 验证自动生成了当天的指标记录
- [ ] 验证指标值合理（0-1 范围）

**验证结果：** ☐ 通过  ☐ 失败（备注：_____________）

---

## 6️⃣ 数据同步验证 (65% 🚧)

### 6.1 基础数据同步
- [ ] 在 Web 端创建一个习惯
- [ ] 验证习惯保存到数据库
- [ ] 刷新页面
- [ ] 验证习惯仍然存在
- [ ] 完成一个习惯打卡
- [ ] 刷新页面
- [ ] 验证打卡记录仍然存在

### 6.2 跨设备同步（如果有 iOS 端）
- [ ] 在 Web 端创建数据
- [ ] 在 iOS 端登录同一账户
- [ ] 验证数据同步显示
- [ ] 在 iOS 端创建数据
- [ ] 在 Web 端刷新
- [ ] 验证数据同步显示

### 6.3 实时同步（如果已实现）
- [ ] 打开两个浏览器窗口，登录同一账户
- [ ] 在窗口 A 完成一个习惯打卡
- [ ] 验证窗口 B 自动更新（无需刷新）
- [ ] 在窗口 B 创建新习惯
- [ ] 验证窗口 A 自动显示新习惯

**验证结果：** ☐ 通过  ☐ 失败（备注：_____________）

---

## 📊 验证总结

### 功能完成度统计
- **用户系统：** ☐ 通过 / ☐ 部分通过 / ☐ 失败
- **第三方登录：** ☐ 通过 / ☐ 部分通过 / ☐ 失败
- **AI助手：** ☐ 通过 / ☐ 部分通过 / ☐ 失败
- **个性化信息推送：** ☐ 通过 / ☐ 部分通过 / ☐ 失败
- **贝叶斯信念循环：** ☐ 通过 / ☐ 部分通过 / ☐ 失败
- **数据同步：** ☐ 通过 / ☐ 部分通过 / ☐ 失败

### 发现的问题
1. _________________________________________________
2. _________________________________________________
3. _________________________________________________

### 需要改进的地方
1. _________________________________________________
2. _________________________________________________
3. _________________________________________________

---

## 🔧 验证工具

### 检查环境变量
```bash
npm run check-env
```

### 查看数据库
- Supabase Dashboard: https://app.supabase.com/
- 检查表：`profiles`, `habits`, `habit_completions`, `user_metrics`, `ai_memory`, `content_feed_vectors`

### 查看浏览器控制台
- 按 F12 打开开发者工具
- 查看 Console 标签页的错误信息
- 查看 Network 标签页的 API 请求

### 查看服务器日志
- 在运行 `npm run dev` 的终端查看日志
- 注意错误信息和警告

---

**验证日期：** _____________  
**验证人员：** _____________  
**总体评价：** ☐ 优秀  ☐ 良好  ☐ 需要改进

