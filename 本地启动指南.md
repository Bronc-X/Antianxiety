# 🚀 本地启动项目指南

## 第一步：检查环境变量配置

### 1. 创建 `.env.local` 文件

在项目根目录（`nomoreanxiousweb`）创建 `.env.local` 文件，添加以下内容：

```env
# Supabase 配置（必需）
NEXT_PUBLIC_SUPABASE_URL=https://hxthvavzdtybkryojudt.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_ZKHE_7pEfxhwDS1UEMAD2g_hYeWrR1c

# DeepSeek API（必需 - 用于 AI 聊天功能）
DEEPSEEK_API_KEY=sk-df1dcd335c3f43ef94621d654e645088

# 内容爬虫 API Key（可选 - 用于保护爬虫 API）
CONTENT_INGEST_API_KEY=your_secure_api_key_here

# 向量嵌入 API（可选 - 如果使用 OpenAI 嵌入）
EMBEDDING_API_URL=https://api.openai.com/v1/embeddings
EMBEDDING_MODEL=text-embedding-3-small

# Twitter API（可选 - 用于爬取 X 内容）
TWITTER_API_KEY=your_twitter_key
TWITTER_API_SECRET=your_twitter_secret
```

**重要提示：**
- `.env.local` 文件不会被提交到 Git（已在 `.gitignore` 中）
- 如果文件已存在，请检查并更新这些值

### 2. 验证环境变量

运行环境变量检查脚本：

```bash
npm run check-env
```

如果所有必需的环境变量都已配置，会显示 ✅ 成功信息。

## 第二步：安装依赖

### 1. 确保已安装 Node.js

检查 Node.js 版本（需要 18.x 或更高版本）：

```bash
node --version
```

如果未安装，请访问 [Node.js 官网](https://nodejs.org/) 下载安装。

### 2. 安装项目依赖

在项目根目录运行：

```bash
npm install
```

或者使用其他包管理器：

```bash
# 使用 yarn
yarn install

# 使用 pnpm
pnpm install
```

安装过程可能需要几分钟，请耐心等待。

## 第三步：启动开发服务器

### 1. 启动 Next.js 开发服务器

```bash

```

或者：

```bash
# 使用 yarn
yarn dev

# 使用 pnpm
pnpm dev
```

### 2. 查看启动信息

启动成功后，终端会显示类似以下信息：

```
  ▲ Next.js 16.0.1
  - Local:        http://localhost:3000
  - Ready in 2.3s
```

## 第四步：访问本地应用

### 1. 打开浏览器

在浏览器中访问：

```
http://localhost:3000
```

### 2. 可访问的页面

- **首页：** http://localhost:3000
- **登录页：** http://localhost:3000/login
- **注册页：** http://localhost:3000/signup
- **仪表板：** http://localhost:3000/dashboard（需要登录）
- **AI 助手：** http://localhost:3000/assistant（需要登录）
- **个性化首页：** http://localhost:3000/landing（需要登录）

## 常见问题排查

### 问题 1：端口 3000 已被占用

**错误信息：**
```
Error: listen EADDRINUSE: address already in use :::3000
```

**解决方法：**
1. 关闭占用 3000 端口的其他程序
2. 或者使用其他端口启动：
   ```bash
   npm run dev -- -p 3001
   ```
   然后访问：http://localhost:3001

### 问题 2：环境变量未设置

**错误信息：**
```
Error: NEXT_PUBLIC_SUPABASE_URL is not defined
```

**解决方法：**
1. 检查 `.env.local` 文件是否存在
2. 确认文件在项目根目录（`nomoreanxiousweb` 文件夹内）
3. 重启开发服务器（停止后重新运行 `npm run dev`）

### 问题 3：依赖安装失败

**错误信息：**
```
npm ERR! code ERESOLVE
```

**解决方法：**
1. 清除 npm 缓存：
   ```bash
   npm cache clean --force
   ```
2. 删除 `node_modules` 和 `package-lock.json`：
   ```bash
   rm -rf node_modules package-lock.json
   ```
3. 重新安装：
   ```bash
   npm install
   ```

### 问题 4：Supabase 连接失败

**错误信息：**
```
Failed to connect to Supabase
```

**解决方法：**
1. 检查 `NEXT_PUBLIC_SUPABASE_URL` 和 `NEXT_PUBLIC_SUPABASE_ANON_KEY` 是否正确
2. 确认 Supabase 项目是否正常运行
3. 检查网络连接

### 问题 5：AI 聊天功能不可用

**错误信息：**
```
AI 服务未配置，请联系管理员
```

**解决方法：**
1. 检查 `DEEPSEEK_API_KEY` 是否在 `.env.local` 中设置
2. 确认 API Key 是否有效
3. 重启开发服务器

## 开发模式特性

### 热重载（Hot Reload）

- 修改代码后，浏览器会自动刷新
- 无需手动刷新页面
- 保持当前页面状态（如果可能）

### 错误提示

- 代码错误会在浏览器中显示详细错误信息
- 终端也会显示编译错误

### 性能监控

- 可以在浏览器开发者工具中查看性能指标
- Next.js 会自动优化代码

## 停止开发服务器

在终端中按 `Ctrl + C`（Windows/Linux）或 `Cmd + C`（Mac）停止服务器。

## 下一步

项目启动成功后，您可以：

1. **测试登录功能**
   - 访问 http://localhost:3000/login
   - 使用邮箱/密码或第三方登录（Google、X、Reddit、微信）

2. **查看仪表板**
   - 登录后访问 http://localhost:3000/dashboard
   - 查看习惯打卡、图表等功能

3. **测试 AI 助手**
   - 访问 http://localhost:3000/assistant
   - 与 AI 助手对话

4. **查看个性化首页**
   - 访问 http://localhost:3000/landing
   - 查看个性化推荐内容

## 快速启动命令总结

```bash
# 1. 进入项目目录
cd nomoreanxiousweb

# 2. 安装依赖（首次运行）
npm install

# 3. 启动开发服务器
npm run dev

# 4. 在浏览器中打开
# http://localhost:3000
```

---

**提示：** 如果遇到任何问题，请检查：
1. Node.js 版本是否 >= 18.x
2. `.env.local` 文件是否配置正确
3. 所有依赖是否已安装
4. 端口 3000 是否可用

