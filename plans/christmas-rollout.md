# åœ£è¯ä¸Šçº¿ç­ç¯è®¡åˆ’ï¼ˆWeb/PWA + iOS ä¼˜å…ˆï¼‰

## èƒŒæ™¯
- å®šä½ï¼šå›½å¤– + ä¸­å›½ç²¾è‹±äººç¾¤ï¼Œä¼˜å…ˆ Web/H5/PWAï¼ŒåŒæ­¥å‡†å¤‡ iOSï¼ˆå…ˆäº Androidï¼‰ã€‚
- å•†ä¸šåŒ–ï¼šéœ€æ”¯æŒå¾®ä¿¡/æ”¯ä»˜å®/é“¶è”æ”¶æ¬¾ï¼›æµ·å¤–å¯å¹¶è¡Œ Stripe å¤‡é€‰ã€‚
- ç¡¬ä»¶ç¯å¢ƒï¼šä»…æœ‰windowsï¼ˆæœ¬æœºï¼‰ï¼Œ iPhone 14 ä¸ 2016 æ¬¾ MacBook Proï¼ˆmacOS 12ï¼‰ï¼›Xcode éœ€è€ƒè™‘äº‘æœº/äº‘çœŸæœºã€‚

## å…³é”®å†³ç­–ä¸å‡†å¤‡
- æ”¯ä»˜æ–¹æ¡ˆï¼ˆå›½å†…ï¼‰ï¼šå¾®ä¿¡æ”¯ä»˜å•†æˆ·å·ï¼ˆmch_idï¼‰ã€APIv3 å¯†é’¥ã€å•†æˆ·è¯ä¹¦/å¹³å°è¯ä¹¦ã€AppID/åŒ…åã€å›è°ƒåŸŸåï¼ˆHTTPSï¼‰ã€ä¼ä¸š/ä¸ªä½“å·¥å•†æˆ·èµ„è´¨ï¼›æ”¯ä»˜å®å½“é¢/APP/ç½‘é¡µæ”¯ä»˜ç­¾çº¦ã€åº”ç”¨ç§é’¥/å…¬é’¥ã€å›è°ƒåŸŸåï¼›é“¶è”äº‘é—ªä»˜ç­¾çº¦ã€è¯ä¹¦ã€å•†æˆ·å·ã€æ¸…ç®—è´¦æˆ·ã€‚
- æµ·å¤–å¤‡é€‰ï¼šStripe è´¦å·ã€Webhook å›è°ƒåŸŸåã€è®¢é˜…/è¯•ç”¨äº§å“é…ç½®ã€ç¨åŠ¡ä¿¡æ¯ã€‚
- æ³•åŠ¡/åˆè§„ï¼šICP/éšç§æ”¿ç­–/ç”¨æˆ·åè®®ï¼Œæ”¯ä»˜é¡µå±•ç¤ºè¯•ç”¨/è‡ªåŠ¨ç»­è´¹æ¡æ¬¾ï¼Œé€€æ¬¾/å–æ¶ˆè·¯å¾„ã€‚
- iOS æ„å»ºï¼šmacOS 12 æœ€å¤šæ”¯æŒ Xcode 14.xï¼Œå¯¹åº” iOS 16 SDKï¼›è‹¥éœ€æ–° SDKï¼Œè€ƒè™‘ç§Ÿäº‘ Macï¼ˆXcode 15+/16+ï¼‰ç¼–è¯‘ä¸ä¸Šä¼ ã€‚éœ€ Apple Developer Program è´¦å·ã€è¯ä¹¦/æè¿°æ–‡ä»¶ã€‚

## é˜¶æ®µè®¡åˆ’ï¼ˆé€†æ¨åœ£è¯ 12/24ï¼‰

| é˜¶æ®µ | æˆªæ­¢ | ç›®æ ‡ | äº¤ä»˜ | Owner |
| --- | --- | --- | --- | --- |
| å†³ç­–/å‡†å¤‡ | 11/29 | ç¡®å®šå›½å†…æ”¯ä»˜è·¯çº¿ + èµ„æ–™æ¸…å•ï¼›ç¡®è®¤æ˜¯å¦ç§Ÿäº‘ Mac | æ”¯ä»˜æ–¹æ¡ˆå†³ç­–æ–‡æ¡£ï¼›å•†æˆ·/è¯ä¹¦éœ€æ±‚è¡¨ï¼›äº‘æœº/æœ¬æœºå¯è¡Œæ€§ç»“è®º | PM/Dev |
| é›†æˆå¼€å‘ | 12/6 | H5/PWA æ”¯ä»˜é“¾è·¯æ‰“é€šï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰ï¼›iOS å¤–å£³åˆå§‹åŒ– | æ”¯ä»˜ SDK å°è£…ï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/é“¶è”ï¼‰ï¼›è¯•ç”¨/ç»­è´¹/å–æ¶ˆé€»è¾‘ï¼›iOS é¡¹ç›®è„šæ‰‹æ¶ | FE/BE/iOS |
| æ ¸å¿ƒå›å½’ | 12/13 | è·¯æ¼” + ä¸»æµç¨‹å…¨é“¾è·¯å›å½’ï¼ˆæ³¨å†Œâ†’ä»»åŠ¡â†’åˆ†æâ†’å‡çº§æ”¯ä»˜ï¼‰ï¼›PWA éªŒæ”¶ | ç”¨ä¾‹é€šè¿‡æ¸…å•ï¼›PWA manifest/SWï¼›å´©æºƒ/é”™è¯¯ç›‘æ§æ¥å…¥ | QA/FE |
| é¢„å‘å¸ƒç°åº¦ | 12/20 | å°æµé‡ç°åº¦ï¼ˆå›½å†…/æµ·å¤–ï¼‰ï¼›æ”¯ä»˜æˆåŠŸç‡ä¸é”™è¯¯ç›‘æ§ | ç°åº¦æŠ¥å‘Šï¼›å¤±è´¥é‡è¯•/å…œåº•æ–‡æ¡ˆï¼›å®¢æœæµç¨‹ | PM/QA |
| æ­£å¼ä¸Šçº¿ | 12/24 | Web/PWA å…¨é‡ï¼›iOS TestFlight/å®¡æ ¸æäº¤ï¼ˆé€šè¿‡å³ä¸Šæ¶ï¼‰ï¼›Android æš‚ç¼“ | å‘å¸ƒ checklistï¼›å›æ»šé¢„æ¡ˆï¼ˆå…³é—­æ–°æ”¯ä»˜å…¥å£ï¼‰ | PM/Dev |

## ä»»åŠ¡åˆ†è§£ï¼ˆå¡«å…¥è®¡åˆ’è¡¨ï¼‰
- æ”¯ä»˜/ä¼šå‘˜
  - èµ„æ–™ï¼šå¾®ä¿¡/æ”¯ä»˜å®/é“¶è”å•†æˆ·å·ã€è¯ä¹¦ã€AppID/åŒ…åã€HTTPS å›è°ƒåŸŸåã€é“¶è¡Œè´¦æˆ·ã€è¥ä¸šæ‰§ç…§ã€éšç§/ç”¨æˆ·åè®®é“¾æ¥ã€‚
  - äº§å“ï¼šè¯•ç”¨ï¼ˆ0 å…ƒ/3 å¤©ï¼‰â†’ è‡ªåŠ¨ç»­è´¹/å–æ¶ˆï¼›ä»·æ ¼å±•ç¤ºã€æ¡æ¬¾ä¸é€€æ¬¾è¯´æ˜ã€‚
  - æŠ€æœ¯ï¼šæ”¯ä»˜ SDK å°è£…ï¼ˆH5 è°ƒèµ·/JSAPIï¼‰ã€å›è°ƒæ ¡éªŒã€ç­¾åä¸è¯ä¹¦è½®æ¢ã€è®¢å•çŠ¶æ€åŒæ­¥ã€è®¢é˜…çŠ¶æ€å­—æ®µï¼ˆsubscription_status/trial_end_at/payment_providerï¼‰ã€‚
  - é£æ§ï¼šé£æ§æç¤º/é™é¢ã€å¤±è´¥é‡è¯•ã€å®¢æœè”ç³»æ–¹å¼ã€‚
- iOS
  - ç¯å¢ƒï¼šæœ¬æœº macOS 12 + Xcode 14 å¯æ”¯æŒ iOS 16ï¼›è‹¥éœ€æ›´æ–° SDK/ä¸Šæ¶ï¼Œç§Ÿäº‘ Mac ç¼–è¯‘ä¸ä¸Šä¼ ã€‚
  - è´¦å·ï¼šApple å¼€å‘è€…è´¦å·ã€è¯ä¹¦ã€æè¿°æ–‡ä»¶ã€App IDã€Capacitor/Expo æ–¹æ¡ˆè¯„ä¼°ï¼ˆè‹¥èµ° RN/Expoï¼Œéœ€ EAS/CI æ„å»ºï¼‰ã€‚
  - é‡Œç¨‹ç¢‘ï¼šWeek1 åˆå§‹åŒ–å£³ + ç™»å½•/æ”¯ä»˜è°ƒèµ·ï¼›Week2 é›†æˆä¸»æµç¨‹ + ä¼šå‘˜é—¨æ§ï¼›Week3 TestFlight æäº¤ã€‚
- Web/PWA
  - ç§»åŠ¨é€‚é…ï¼šåº•éƒ¨ CTAã€è§¦æ§åŒºåŸŸã€Skeletonã€è¡¨å•é”®ç›˜è·³è½¬ï¼›æ ¸å¿ƒé¡µ `/signup` `/landing` `/analysis` `/onboarding/upgrade` `/roadshow`ã€‚
  - PWAï¼šmanifestã€service workerï¼ˆé™æ€ç¼“å­˜/å›é€€é¡µï¼‰ã€ç¦»çº¿æç¤ºã€‚
  - æ€§èƒ½ï¼šå›¾ç‰‡å‹ç¼©ï¼ˆwebp/avifï¼‰ã€æŒ‰éœ€åŠ è½½é‡ç»„ä»¶ï¼ˆå›¾è¡¨ï¼‰ã€‚
- QA/ç›‘æ§
  - åŸ‹ç‚¹ï¼šæ”¯ä»˜æ¼æ–—ã€æŒ‰é’®ç‚¹å‡»ã€é”™è¯¯ä¸ŠæŠ¥ï¼ˆSentry/è‡ªå»ºï¼‰ã€‚
  - å…¼å®¹çŸ©é˜µï¼šiOS Safari/Chromeï¼›Android å¾®ä¿¡/Chromeï¼›å¼±ç½‘/ç¦»çº¿å›é€€ã€‚

## é£é™©ä¸é¢„æ¡ˆ
- æ”¯ä»˜ç­¾çº¦/è¯ä¹¦å»¶è¿Ÿï¼šå‡†å¤‡ Stripe ä½œä¸ºæµ·å¤–å…œåº•ï¼Œå›½å†…å…ˆä¸Šçº¿è¯•ç”¨å…æ”¯ä»˜ï¼ˆå…ˆæ‹‰å–è®¢é˜…çŠ¶æ€ä¸ºå…è´¹è¯•ç”¨ï¼‰ã€‚
- iOS æ‰“åŒ…å—é™ï¼šè‹¥æœ¬æœº Xcode ä¸æ»¡è¶³ä¸Šä¼ éœ€æ±‚ï¼Œç§Ÿäº‘ Mac è¿›è¡Œæœ€ç»ˆæ„å»ºä¸ä¸Šä¼ ï¼›TestFlight å…ˆè¡Œã€‚
- å®¡æ ¸æ—¶é—´ï¼šè‹¹æœå®¡æ ¸ 1-3 å¤©ä¸å®šï¼Œæå‰æäº¤ï¼›ä¸Šçº¿å‰æä¾› Web/PWA å…¥å£ä½œä¸ºå¤‡é€‰ã€‚

## ÒÆ¶¯¶ËÒÆÖ²¼Æ»®£¨iOS ÓÅÏÈ£¬Android ´ÎÖ®£©
### Â·ÏßÑ¡Ôñ
- ÍÆ¼ö£ºExpo/React Native£¬ĞÂ½¨ `apps/mobile`£¬ÓëÏÖÓĞ Next.js Web ¹²Ïí Supabase API ºÍ UI ³£Á¿£»EAS/Xcode ´ò°ü iOS£¬EAS/Gradle ´ò°ü Android¡£
- ±¸ÓÃ£ºCapacitor ½« Web/PWA ·â×°³É¿Ç£¬ÊÊºÏ¿ìËÙÄÚ²â£¬µ«ÍÆËÍ/ÊÖÊÆ/Ö§¸¶ÌåÑé½ÏÈõ¡£

### ¹¤³ÌÓëÕËºÅ×¼±¸£¨D0-D1£©
- Apple£ºApple Developer ÕËºÅ¡¢Bundle ID£¨Èç `com.nomoreanxious.app`£©¡¢Ö¤Êé/ÃèÊöÎÄ¼ş£»È·ÈÏÊÇ·ñĞèÔÆ Mac£¨iOS17+/ÉÏ¼Ü£©¡£
- Android£º°üÃû `com.nomoreanxious.app`£¬Éú³É keystore£¨EAS ×Ô¶¯»òÊÖ¶¯£©£¬¿ªÆôÄ£ÄâÆ÷¡£
- ²Ö¿â£ºĞÂÔö `apps/mobile`¡¢`packages/api`£¨Supabase/HTTP ¿Í»§¶Ë£¬ÊÊÅä RN£©¡¢`packages/ui`£¨Ö÷Ìâ/ÑÕÉ«£©£¬Í³Ò» `.env` Ä£°å£¨`EXPO_PUBLIC_SUPABASE_URL/ANON_KEY`¡¢`API_BASE`¡¢DeepLink scheme£©¡£
- ÉîÁ´Óë»Øµ÷£º¶¨Òå `myapp://auth/callback`£»ÔÚ Supabase Auth ÀïÅäÖÃ iOS/Android redirect£»Next API ¿ªÆô CORS£¬Ê¹ÓÃ Bearer token£¨Supabase access_token£©¶ø·Ç Cookie¡£

### Àï³Ì±®£¨Ïà¶Ô½ñÈÕ£©
- D0-D1£ºÈ·¶¨Â·Ïß£¨Expo£©£¬´´½¨ `apps/mobile`£¬ÅÜÍ¨¿Õ¿Çµ½ iOS Ä£ÄâÆ÷/Õæ»úºÍ Android Ä£ÄâÆ÷£»½ÓÈë Supabase ¿Í»§¶Ë£¨RN polyfill£©¡£
- D2-D3£ºÍê³ÉµÇÂ¼/×¢²á/µÇ³ö/Íü¼ÇÃÜÂë£»Session ±£³Ö£»UI ÏÈÓÃ»ù´¡ÑùÊ½£»½ÓÈë API »ù´¡´íÎóÌáÊ¾¡£
- D4-D5£ºDashboard ºËĞÄÊı¾İ£¨Ï°¹ßÁĞ±í/½ø¶È£©¡¢AI ÁÄÌì×îĞ¡°æ£¨¸´ÓÃ `/api/ai/chat`£©£»ÊµÊ±Ë¢ĞÂ£¨Supabase Realtime£©£»ÀëÏßÊ§°ÜÖØÊÔ¶ÓÁĞ³ûĞÎ¡£
- D6-D7£ºFeed/Áé¸Ğ¡¢¼Æ»®¿¨Æ¬£¨²é¿´/È·ÈÏ/Íê³É£©¡¢ÌáĞÑ¶©ÔÄË¢ĞÂ£»´ò°ü iOS TestFlight ÄÚ²â°ü¡¢Android ÄÚ²â APK/AAB¡£
- D8-D9£º±´Ò¶Ë¹Í¼±í½ÓÕæÊı¾İ£»ÍÆËÍ£¨Expo Notifications -> APNs/Firebase£©£»»Ò¶È²âÊÔÓë±ÀÀ£/Âñµã½ÓÈë¡£

### ¼¼ÊõÒªµã
- Supabase RN ¿Í»§¶Ë£ºÊ¹ÓÃ `react-native-url-polyfill`£¬Í³Ò»·â×° `createClient`£»½ûÓÃ Node-only API¡£
- API ·ÃÎÊ£ºÍ³Ò» `API_BASE=https://<prod-domain>`£»Next API Ôö¼Ó CORS£»ËùÓĞÇëÇó´ø `Authorization: Bearer <access_token>`¡£
- UI ¹²Ïí£ºÑÕÉ«/¼ä¾à/Í¼±ê·Åµ½ `packages/ui`£¬ÎÄ°¸/ÀàĞÍ·Å `packages/shared`£¬¼õÉÙÖØ¸´¡£
- ÀëÏßÓë²¢·¢£º±¾µØ¶ÓÁĞ£¨ÖØÊÔ+ÖØ²¥£©£¬±ÜÃâË«¶ËĞ´³åÍ»£»Realtime ¶©ÔÄ habits/ai_reminders/user_metrics¡£
- ¹¹½¨Óë·¢²¼£ºEAS ÅäÖÃ `eas.json`£¨dev/preview/release£©£»iOS Èô±¾»ú Xcode °æ±¾²»¹»£¬×îºó½×¶ÎÓÃÔÆ Mac ´ò°üÉÏ´«¡£

### ½»¸¶Îï
- `apps/mobile` »ùÏß´úÂë£¨µ¼º½¡¢Supabase ¿Í»§¶Ë¡¢¼øÈ¨Á÷¡¢AI Chat »ù´¡ UI£©¡£
- `eas.json`¡¢`.env.mobile.example`¡¢ÉîÁ´/»Øµ÷ÅäÖÃÎÄµµ¡£
- ¹¹½¨²úÎï£ºiOS TestFlight ÄÚ²â°ü£¬Android ÄÚ²â APK/AAB¡£

## ½ñÈÕĞĞ¶¯£¨²»×âÔÆ¡¢²»ÉêÇë¿ª·¢ÕßÕËºÅ£©
- ½ö±¾µØ¿ª·¢£ºÔİ²»×âÔÆ Mac£¬iOS ×îÖÕÉÏ¼Ü°üÑÓºó£»½ñÈÕÖ»×ö±¾µØ¿ÉÖ´ĞĞÊÂÏî¡£
- ÕËºÅÔİ»º£º²»ÉêÇë Apple/Google ¿ª·¢ÕßÕËºÅ£¬±£Áô Bundle ID/°üÃûÃüÃû·½°¸¼´¿É¡£
- ²Ö¿â×¼±¸£º¹æ»®ĞÂÔö `apps/mobile`¡¢`packages/api`¡¢`packages/ui`¡¢`packages/shared`£»ÏÈ¶¨ÉîÁ´ scheme£¨Èç `myapp://auth/callback`£©ºÍ API_BASE ÓòÃûÕ¼Î»¡£
- »·¾³±äÁ¿Ä£°å£º×¼±¸ `.env.mobile.example` ×Ö¶Î£º`EXPO_PUBLIC_SUPABASE_URL`¡¢`EXPO_PUBLIC_SUPABASE_ANON_KEY`¡¢`API_BASE`¡¢`EXPO_PUBLIC_DEEP_LINK_SCHEME`¡£
- ±¾µØÑéÖ¤£ºÈ·±£ Android Studio Ä£ÄâÆ÷¿ÉÆô¶¯£¬Expo CLI/Node »·¾³¿ÉÔËĞĞ£¨ÎŞĞèµÇÂ¼ÕËºÅ£©£»Web ¶Ë±£³ÖÏÖ×´¡£
- ºóĞøÌõ¼ş´¥·¢£ºÒ»µ©¾ö¶¨ÉÏ¼ÜÔÙÉêÇë Apple ¿ª·¢ÕßÕËºÅ¡¢Éú³ÉÖ¤Êé/ÃèÊöÎÄ¼ş²¢¿¼ÂÇÔÆ Mac£»Android keystore Ò²ÔÚÉÏ¼ÜÇ°Éú³É¡£

## ½ñÈÕ¿ÉÖ´ĞĞ£¨±¾µØ¡¢ÎŞÕËºÅ/ÔÆ»ú£©
- ÒÑĞÂÔö `.env.mobile.example`£¬×Ö¶Î£ºEXPO_PUBLIC_SUPABASE_URL¡¢EXPO_PUBLIC_SUPABASE_ANON_KEY¡¢API_BASE£¨Õ¼Î» https://api.example.com£©¡¢EXPO_PUBLIC_DEEP_LINK_SCHEME£¨Õ¼Î» myapp£©¡£
- ½¨Òé±¾µØ½ö×öÄ¿Â¼Õ¼Î»£º`apps/mobile`¡¢`packages/api`¡¢`packages/ui`¡¢`packages/shared`£¨mkdir ¼´¿É£¬ÏÈ²»Ğ´´úÂë£©¡£
- ÈôÒª³õÊ¼»¯ Expo£¨µÈÄãÈ·ÈÏÔÙÅÜ£©£º`npx create-expo-app apps/mobile --template blank --npm`£¬½øÈëºó°²×°ÒÀÀµ `npm i @supabase/supabase-js react-native-url-polyfill @react-navigation/native expo-router` µÈ¡£
- ±¾µØ¼ì²é£ºAndroid Ä£ÄâÆ÷ÄÜÆô¶¯£»Node/npm °æ±¾Õı³££¨ÒÑ´æÔÚ Next ÏîÄ¿¼´¿É£©¡£
- ÉîÁ´Õ¼Î»£ººóĞøÔÚ Expo `app.json`/`app.config.ts` ÅäÖÃ scheme `myapp`£¬²¢ÔÚ Supabase Auth Ìî `myapp://auth/callback`£¨µÈ¿ªÕËºÅºóÔÙ×ö£©¡£
- API Õ¼Î»£ºÒÆ¶¯¶ËÇëÇó Next API£¬ĞèÒªÔÚ²¿Êğ¶Ë¿ªÆô CORS£¬²¢¸ÄÎª `Authorization: Bearer <access_token>` ·½Ê½£¨´ıºó¶ËÅäÖÃ£©¡£
