# 需求文档

## 简介

本功能旨在解决 No More Anxious 应用中国际化（i18n）同步不完整的问题。多个组件包含硬编码的中文文本，缺少对应的英文翻译，导致用户切换到英文模式时出现中英混杂的体验。目标是确保所有面向用户的文本都正确国际化，并在中文（zh）和英文（en）之间同步。

## 术语表

- **i18n**: 国际化 - 设计软件使其能够适应各种语言的过程
- **翻译键**: 用于查找翻译文本的唯一标识符（例如 'landing.hello'）
- **硬编码文本**: 直接嵌入组件代码中的文本字符串，而非使用翻译键
- **语言上下文**: 提供当前语言设置和翻译函数的 React 上下文
- **useI18n Hook**: 提供语言状态和翻译函数 `t()` 访问的自定义 React Hook
- **代谢指纹**: 在分析页面显示的用户个性化健康分析结果

## 需求

### 需求 1

**用户故事:** 作为偏好英文的用户，我希望在选择英文语言时所有 UI 文本都显示英文，这样我可以理解整个应用而不会看到中文字符。

#### 验收标准

1. WHEN 用户将语言设置为英文 THEN DailyInsightHub 组件 SHALL 显示所有英文文本，包括标签页标签、状态消息和按钮文本
2. WHEN 用户将语言设置为英文 THEN DailyQuestionnaire 组件 SHALL 显示所有英文问题和选项
3. WHEN 用户将语言设置为英文 THEN 助手页面 SHALL 显示英文导航文本和标题
4. WHEN 用户将语言设置为英文 THEN 加载页面 SHALL 显示英文加载文本
5. WHEN 用户将语言设置为英文 THEN 所有用户可见的错误消息 SHALL 以英文显示

### 需求 2

**用户故事:** 作为开发者，我希望所有可翻译字符串一致使用 i18n 系统，这样将来添加新语言会很简单。

#### 验收标准

1. WHEN 添加新的面向用户的文本 THEN 开发者 SHALL 使用 useI18n hook 中的 `t()` 函数配合翻译键
2. WHEN 使用翻译键 THEN lib/i18n.tsx 中的 translations 对象 SHALL 包含 'zh' 和 'en' 两种语言的条目
3. WHEN 根据语言显示条件文本 THEN 组件 SHALL 使用 useI18n 中的 `language` 变量选择适当的文本

### 需求 3

**用户故事:** 作为用户，我希望问卷体验完全本地化，这样我可以用我偏好的语言完成每日签到。

#### 验收标准

1. WHEN 显示问卷问题 THEN 系统 SHALL 以用户选择的语言显示问题
2. WHEN 显示问卷选项 THEN 系统 SHALL 以用户选择的语言显示所有答案选项
3. WHEN 显示问卷进度和状态消息 THEN 系统 SHALL 使用用户选择的语言
4. WHEN 问卷完成 THEN 完成消息 SHALL 以用户选择的语言显示

### 需求 4

**用户故事:** 作为用户，我希望每日计划面板以我的语言显示任务信息，这样我能理解每个任务的内容。

#### 验收标准

1. WHEN 在计划面板显示任务标题 THEN 系统 SHALL 以用户选择的语言显示标题
2. WHEN 显示任务描述 THEN 系统 SHALL 以用户选择的语言显示描述
3. WHEN 显示进度状态消息 THEN 系统 SHALL 使用用户选择的语言
4. WHEN 显示时长信息 THEN 系统 SHALL 根据用户语言适当格式化时长文本

### 需求 5

**用户故事:** 作为在助手页面导航的用户，我希望所有导航和标题文本使用我的语言，这样我可以自信地导航应用。

#### 验收标准

1. WHEN 查看助手页面标题 THEN 系统 SHALL 以用户选择的语言显示页面标题
2. WHEN 查看导航链接 THEN 系统 SHALL 以用户选择的语言显示链接文本
3. WHEN 查看表单标签和描述 THEN 系统 SHALL 以用户选择的语言显示所有文本
4. WHEN 查看状态消息 THEN 系统 SHALL 以用户选择的语言显示消息

### 需求 6

**用户故事:** 作为查看分析页面的用户，我希望代谢指纹分析以我的语言显示，这样我能理解我的健康洞察。

#### 验收标准

1. WHEN 查看分析页面加载状态 THEN 系统 SHALL 以用户选择的语言显示"AI 正在分析你的代谢指纹..."
2. WHEN 查看代谢指纹标题 THEN 系统 SHALL 以用户选择的语言显示状态消息（如"压力恢复期"）
3. WHEN 分析页面显示用户名 THEN 系统 SHALL 使用数据库中的实际用户资料名称

### 需求 7

**用户故事:** 作为贝叶斯认知天平页面的用户，我希望所有界面元素使用我的语言，这样我可以有效使用认知校准功能。

#### 验收标准

1. WHEN 查看焦虑水平显示 THEN 系统 SHALL 以用户选择的语言显示"当前焦虑水平"等标签
2. WHEN 查看恐惧/真相刻度 THEN 系统 SHALL 以用户选择的语言显示"恐惧"和"真相"标签
3. WHEN 查看"开始认知校准"按钮 THEN 系统 SHALL 以用户选择的语言显示按钮文本
4. WHEN 查看焦虑趋势部分 THEN 系统 SHALL 以用户选择的语言显示所有状态消息和空状态文本
5. WHEN 查看情绪监测部分 THEN 系统 SHALL 以用户选择的语言显示部分标题

### 需求 8

**用户故事:** 作为计划页面的用户，我希望所有计划信息以我的语言显示，这样我可以有效管理我的健康计划。

#### 验收标准

1. WHEN 查看计划页面标题 THEN 系统 SHALL 以用户选择的语言显示"我的健康方案"
2. WHEN 查看计划描述 THEN 系统 SHALL 以用户选择的语言显示副标题文本
3. WHEN 查看单个计划卡片 THEN 系统 SHALL 以用户选择的语言显示计划标题和内容

### 需求 9

**用户故事:** 作为入门升级页面的用户，我希望所有升级信息使用我的语言，这样我可以对高级功能做出明智决定。

#### 验收标准

1. WHEN 查看升级页面 THEN 系统 SHALL 以用户选择的语言显示所有功能描述
2. WHEN 查看定价信息 THEN 系统 SHALL 以用户选择的语言显示价格标签和按钮文本
3. WHEN 查看权益列表 THEN 系统 SHALL 以用户选择的语言显示所有权益项目

### 需求 10

**用户故事:** 作为设置页面的用户，我希望所有设置选项和标签使用我的语言，这样我可以轻松配置我的偏好。

#### 验收标准

1. WHEN 查看设置部分标题 THEN 系统 SHALL 以用户选择的语言显示标题
2. WHEN 查看表单标签 THEN 系统 SHALL 以用户选择的语言显示所有输入标签
3. WHEN 查看下拉选项 THEN 系统 SHALL 以用户选择的语言显示选项文本
4. WHEN 查看操作按钮 THEN 系统 SHALL 以用户选择的语言显示按钮文本
